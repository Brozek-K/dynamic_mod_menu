@first_empty_id = 0
@items_per_page = 20

dynamic_mod_menu_open = {
    potential = {
        OR = {
            ### BEGIN TEMPLATE:open_flags ###
            ### END TEMPLATE:open_flags ###
        }
    }
    allow = {
        NOT = {
            has_global_flag = dynamic_mod_menu_opened
        }
    }
    effect = {
        hidden_effect = {
            country_event = {
                id = dynamic_mod_menu.1
            }
        }
    }
}

dynamic_mod_menu_close = {
    potential = {
        always = yes
    }
    allow = {
        always = yes
    }
    effect = {
        hidden_effect = {
            remove_global_flag = dynamic_mod_menu_opened
        }
    }
}

dynamic_mod_menu_next_page = {
    potential = {
        NOT = {
            OR = {
                has_global_flag = dynamic_mod_menu_no_new_pages
                check_variable = {
                    which = dynamic_mod_menu_items_shown
                    value < @items_per_page
                }
            }
        }
    }
    allow = {
        always = yes
    }
    effect = {
        hidden_effect = {
            country_event = {
                id = dynamic_mod_menu_pagination.1
            }
        }
    }
}

dynamic_mod_menu_prev_page = {
    potential = {
        NOT = {
            OR = {
                has_global_flag = dynamic_mod_menu_no_prev_pages
                check_variable = {
                    which = dynamic_mod_menu_last_processed_id
                    value = @first_empty_id
                }
            }
        }
    }
    allow = {
        always = yes
    }
    effect = {
        hidden_effect = {
            country_event = {
                id = dynamic_mod_menu_pagination.2
            }
        }
    }
}